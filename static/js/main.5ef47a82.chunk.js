(this["webpackJsonpponds-forge-lane-swimming-www"]=this["webpackJsonpponds-forge-lane-swimming-www"]||[]).push([[0],{16:function(e){e.exports=JSON.parse('{"hash":"e3ba6d49","date":"2020-01-18T13:13:39.000Z"}')},18:function(e,t,n){e.exports=n(44)},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),i=n.n(l),c=n(17),o=n(4),s=n.n(o),u=n(3),m=n(2),d=n(15),f=n.n(d),v=n(16);n(42);function g(e){var t=e.gitInfo;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Version Info"),r.a.createElement("span",null,"Hash: ",t.hash,", Date: ",t.date))}var p=["Su","Mo","Tu","We","Th","Fr","Sa"],b=function(e){var t=e.item,n=[];return t.alterations&&t.alterations.length>0&&t.alterations.forEach((function(e,t){n.push(r.a.createElement("br",{key:"br"+t}));var a=e.date||"No date";n.push(r.a.createElement("span",{key:"alteration-"+t,style:{color:"red"}},a+", "+e.message))})),r.a.createElement("div",null,r.a.createElement("div",null,t.description),r.a.createElement("div",null,t.room,t.location),r.a.createElement("div",null,n))};function E(e){var t=isNaN(e.day)?e.day:p[e.day];if(!e.items[0])return null;var n=function(n){return 0===n?r.a.createElement("td",{rowSpan:e.items.length},t):null};return e.items.map((function(e,t){return function(e,t,n){return r.a.createElement("tr",{key:e},t(e),r.a.createElement("td",null,n.startTime),r.a.createElement("td",null,n.endTime),r.a.createElement("td",null,r.a.createElement(b,{item:n,key:e})))}(t,n,e)}))}var h=function(e){var t=e.timetable;return r.a.createElement("table",{className:"tableTimetable",cellSpacing:0,cellPadding:0},r.a.createElement("tbody",null,t.map(E)))},w=new URL(window.location.href);console.log("Use DEBUG query parameter to use local data (not live data).");var y="false"!==w.searchParams.get("DEBUG"),k=w.searchParams.get("localDataSource");function j(e){switch(k){case"ok":return"./test/laneSwimming.json";case"singleDataSourceError":return"./test/laneSwimming.s10error.json";case"error":return"./test/laneSwimming.error.json";case"20190427":return"./test/20190427-225524_laneSwimming.json";default:return null}}function S(e,t){var n=function(t,n){return Object(m.a)({},e,Object(u.a)({},t,n))};switch(t.type){case"set":return n(t.field.name,t.field.value);case"reduce":return Object(m.a)({},e,Object(u.a)({},t.field.name,t.reducer(e[t.field.name])));case"changeTimetableVisibility":return n("visible",Object(m.a)({},e.visible,Object(u.a)({},t.key,t.visible)))}return e}function O(e,t,n){var a,r,l;return s.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return(r=function(e,t){return n({type:"reduce",field:{name:e},reducer:t})})(a="fetch."+e,(function(){return{loading:!0}})),i.prev=3,i.next=6,s.a.awrap(f.a.get(t));case 6:return l=i.sent,r(a,(function(e){return Object(m.a)({},e,{data:l.data})})),i.abrupt("return",l);case 11:throw i.prev=11,i.t0=i.catch(3),i.t0.uri=t,r(a,(function(e){return Object(m.a)({},e,{error:i.t0})})),i.t0;case 16:return i.prev=16,r(a,(function(e){return Object(m.a)({},e,{loading:null})})),i.finish(16);case 19:case"end":return i.stop()}}),null,null,[[3,11,16,19]])}function T(e){var t=e.title,n=e.error,a=n.statusCode?[n.statusCode,n.options&&n.options.uri]:n;return r.a.createElement("div",null,r.a.createElement("h1",null,t),r.a.createElement("div",null,"string"===typeof a?n:r.a.createElement("pre",null,JSON.stringify(n,null,2))))}function x(e){var t=e.name,n=e.timetable,a=e.vendor,l=e.visible,i=void 0===l||l,c=e.setVisible;t=t||"Regular Timetable",a=a||"Unknown vendor";return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),c&&c(!i)}},t," (",a,")")),i&&r.a.createElement(h,{timetable:n}))}var N={};var D=function(){var e=r.a.useReducer(S,N),t=Object(c.a)(e,2),n=t[0],a=t[1],l=function(e){if(y&&e){var t=j();if(t)return t}return"https://c1dz9rg5cd.execute-api.eu-west-2.amazonaws.com/prod/laneSwimmingData"}(k);return r.a.useEffect((function(){!function(){var e,t;s.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=l+"?"+(new Date).getTime(),n.prev=1,n.next=4,s.a.awrap(O("timetables",e,a));case 4:t=n.sent,a({type:"set",field:{name:"timetables",value:t.data}}),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(1);case 10:case"end":return n.stop()}}),null,null,[[1,8]])}()}),[l]),r.a.createElement("div",{className:"App"},function(e){if(!e)return"No state!";console.log(e);var t=e.timetables,n=e["fetch.timetables"];return r.a.createElement(r.a.Fragment,null,n&&n.loading&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",null,"Loading Timetables..."),r.a.createElement("img",{src:"".concat("/ponds-forge-lane-swimming","/loader.gif")})),n&&n.error&&r.a.createElement(T,{title:"Fetch Timetables Error",error:n.error}),t&&t.reduce((function(t,n,l){var i=n.vendor;return n.timetables.forEach((function(n,c){var o=n.name,s=n.timetable,u=n.error;if(u)t.push(r.a.createElement(T,{title:"".concat(o," (").concat(i||"Unknown vendor",")"),error:u,key:t.length}));else{var m="timetable[".concat(l,"][").concat(c,"]"),d=Boolean(e.visible&&e.visible[m]);t.push(r.a.createElement(x,{name:o,timetable:s,vendor:i,key:m,visible:d,setVisible:function(e){return a({type:"changeTimetableVisibility",key:m,visible:e})}}))}})),t}),[]))}(n),r.a.createElement("hr",null),r.a.createElement(g,{gitInfo:v}))};n(43);i.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",(function(){var e="".concat("/ponds-forge-lane-swimming","/service-worker.js");navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}))}},[[18,1,2]]]);
//# sourceMappingURL=main.5ef47a82.chunk.js.map