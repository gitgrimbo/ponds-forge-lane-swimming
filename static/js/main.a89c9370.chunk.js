(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e){e.exports={hash:"bbc5c2fe",date:"2019-04-27T22:32:10.000Z"}},19:function(e,t,n){e.exports=n(50)},46:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),l=n.n(o),i=n(3),c=n.n(i),u=n(11),s=n(12),m=n(13),d=n(17),f=n(14),v=n(18),h=n(15),g=n.n(h),p=(n(46),["Su","Mo","Tu","We","Th","Fr","Sa"]),E=function(e){var t=e.item,n=[];return t.alterations&&t.alterations.length>0&&t.alterations.forEach(function(e,t){n.push(r.a.createElement("br",{key:"br"+t}));var a=e.date||"No date";n.push(r.a.createElement("span",{key:"alteration-"+t,style:{color:"red"}},a+", "+e.message))}),r.a.createElement("div",null,r.a.createElement("div",null,t.description),r.a.createElement("div",null,t.room,t.location),r.a.createElement("div",null,n))};function w(e){var t=isNaN(e.day)?e.day:p[e.day];if(!e.items[0])return null;var n=function(n){return 0===n?r.a.createElement("td",{rowSpan:e.items.length},t):null};return e.items.map(function(e,t){return function(e,t,n){return r.a.createElement("tr",{key:e},t(e),r.a.createElement("td",null,n.startTime),r.a.createElement("td",null,n.endTime),r.a.createElement("td",null,r.a.createElement(E,{item:n,key:e})))}(t,n,e)})}var b=function(e){var t=e.timetable;return r.a.createElement("table",{className:"tableTimetable",cellSpacing:0,cellPadding:0},r.a.createElement("tbody",null,t.map(w)))},k=n(16),y=new URL(window.location.href);console.log("Use DEBUG query parameter to use local data (not live data).");var S="false"!==y.searchParams.get("DEBUG"),D=y.searchParams.get("localDataSource"),T=function(e){var t=e.gitInfo;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Version Info"),r.a.createElement("span",null,"Hash: ",t.hash,", Date: ",t.date))},j=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"getLocalDataSourceURL",value:function(e){switch(D){case"ok":return"./test/laneSwimming.json";case"singleDataSourceError":return"./test/laneSwimming.s10error.json";case"error":return"./test/laneSwimming.error.json";case"20190427":return"./test/20190427-225524_laneSwimming.json";default:return null}}},{key:"getDataSourceURL",value:function(e){if(S&&e){var t=this.getLocalDataSourceURL(e);if(t)return t}return"https://c1dz9rg5cd.execute-api.eu-west-2.amazonaws.com/prod/laneSwimmingData"}},{key:"componentDidMount",value:function(){var e=Object(u.a)(c.a.mark(function e(){var t,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getDataSourceURL(D),e.next=3,g.a.get(t+"?"+(new Date).getTime());case 3:n=e.sent,this.setState({data:n.data});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderTimetable",value:function(e,t,n,a){return r.a.createElement("div",{key:a},r.a.createElement("h1",null,e||"Regular Timetable"," (",n||"Unknown vendor",")"),r.a.createElement(b,{timetable:t}))}},{key:"renderError",value:function(e,t,n,a){var o=t.statusCode?[t.statusCode,t.options&&t.options.uri]:"string"===typeof t?t:JSON.stringify(t);return r.a.createElement("div",{key:a},r.a.createElement("h1",null,e," (",n||"Unknown vendor",")"),r.a.createElement("div",null,"Error: ",String(o)))}},{key:"renderTimetables",value:function(e){var t=this;return e.reduce(function(e,n){var a=n.vendor;return n.timetables.forEach(function(n){var r=n.name,o=n.timetable,l=n.error;e.push(l?t.renderError(r,l,a,e.length):t.renderTimetable(r,o,a,e.length))}),e},[])}},{key:"renderApp",value:function(e){return r.a.createElement("div",null,e&&this.renderTimetables(e),r.a.createElement("hr",null),r.a.createElement(T,{gitInfo:k}))}},{key:"render",value:function(){var e=this.renderApp(this.state&&this.state.data);return r.a.createElement("div",{className:"App"},e)}}]),t}(a.Component);n(48);l.a.render(r.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("/ponds-forge-lane-swimming","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}},[[19,2,1]]]);
//# sourceMappingURL=main.a89c9370.chunk.js.map