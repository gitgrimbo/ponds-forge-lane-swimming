(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e){e.exports={hash:"5f7840e3",date:"2019-04-30T16:11:07.000Z"}},17:function(e,t,n){e.exports=n(48)},44:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),l=n.n(i),c=n(4),o=n.n(c),s=n(16),u=n(6),m=n(3),f=n(2),d=n(14),v=n.n(d),p=n(15);n(44);function b(e){var t=e.gitInfo;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Version Info"),r.a.createElement("span",null,"Hash: ",t.hash,", Date: ",t.date))}var g=["Su","Mo","Tu","We","Th","Fr","Sa"],h=function(e){var t=e.item,n=[];return t.alterations&&t.alterations.length>0&&t.alterations.forEach(function(e,t){n.push(r.a.createElement("br",{key:"br"+t}));var a=e.date||"No date";n.push(r.a.createElement("span",{key:"alteration-"+t,style:{color:"red"}},a+", "+e.message))}),r.a.createElement("div",null,r.a.createElement("div",null,t.description),r.a.createElement("div",null,t.room,t.location),r.a.createElement("div",null,n))};function E(e){var t=isNaN(e.day)?e.day:g[e.day];if(!e.items[0])return null;var n=function(n){return 0===n?r.a.createElement("td",{rowSpan:e.items.length},t):null};return e.items.map(function(e,t){return function(e,t,n){return r.a.createElement("tr",{key:e},t(e),r.a.createElement("td",null,n.startTime),r.a.createElement("td",null,n.endTime),r.a.createElement("td",null,r.a.createElement(h,{item:n,key:e})))}(t,n,e)})}var w=function(e){var t=e.timetable;return r.a.createElement("table",{className:"tableTimetable",cellSpacing:0,cellPadding:0},r.a.createElement("tbody",null,t.map(E)))},y=new URL(window.location.href);console.log("Use DEBUG query parameter to use local data (not live data).");var k="false"!==y.searchParams.get("DEBUG"),j=y.searchParams.get("localDataSource");function O(e){switch(j){case"ok":return"./test/laneSwimming.json";case"singleDataSourceError":return"./test/laneSwimming.s10error.json";case"error":return"./test/laneSwimming.error.json";case"20190427":return"./test/20190427-225524_laneSwimming.json";default:return null}}function S(e,t){var n=function(t,n){return Object(f.a)({},e,Object(m.a)({},t,n))};switch(t.type){case"set":return n(t.field.name,t.field.value);case"reduce":return Object(f.a)({},e,Object(m.a)({},t.field.name,t.reducer(e[t.field.name])));case"changeTimetableVisibility":return n("visible",Object(f.a)({},e.visible,Object(m.a)({},t.key,t.visible)))}return e}function T(e,t,n){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(o.a.mark(function e(t,n,a){var r,i,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=function(e,t){return a({type:"reduce",field:{name:e},reducer:t})})(r="fetch."+t,function(){return{loading:!0}}),e.prev=3,e.next=6,v.a.get(n);case 6:return l=e.sent,i(r,function(e){return Object(f.a)({},e,{data:l.data})}),e.abrupt("return",l);case 11:throw e.prev=11,e.t0=e.catch(3),e.t0.uri=n,i(r,function(t){return Object(f.a)({},t,{error:e.t0})}),e.t0;case 16:return e.prev=16,i(r,function(e){return Object(f.a)({},e,{loading:null})}),e.finish(16);case 19:case"end":return e.stop()}},e,this,[[3,11,16,19]])}))).apply(this,arguments)}function D(e){var t=e.title,n=e.error,a=n.statusCode?[n.statusCode,n.options&&n.options.uri]:n;return r.a.createElement("div",null,r.a.createElement("h1",null,t),r.a.createElement("div",null,"string"===typeof a?n:r.a.createElement("pre",null,JSON.stringify(n,null,2))))}function N(e){var t=e.name,n=e.timetable,a=e.vendor,i=e.visible,l=void 0===i||i,c=e.setVisible;t=t||"Regular Timetable",a=a||"Unknown vendor";return r.a.createElement("div",null,r.a.createElement("h1",null,r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),c&&c(!l)}},t," (",a,")")),l&&r.a.createElement(w,{timetable:n}))}var U={};var V=function(){var e=r.a.useReducer(S,U),t=Object(s.a)(e,2),n=t[0],a=t[1],i=function(e){if(k&&e){var t=O();if(t)return t}return"https://c1dz9rg5cd.execute-api.eu-west-2.amazonaws.com/prod/laneSwimmingData"}(j);return r.a.useEffect(function(){Object(u.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=i+"?"+(new Date).getTime(),e.prev=1,e.next=4,T("timetables",t,a);case 4:n=e.sent,a({type:"set",field:{name:"timetables",value:n.data}}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}},e,this,[[1,8]])}))()},[i]),r.a.createElement("div",{className:"App"},function(e){if(!e)return"No state!";console.log(e);var t=e.timetables,n=e["fetch.timetables"];return r.a.createElement(r.a.Fragment,null,n&&n.loading&&r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement("p",null,"Loading Timetables..."),r.a.createElement("img",{src:"".concat("/ponds-forge-lane-swimming","/loader.gif")})),n&&n.error&&r.a.createElement(D,{title:"Fetch Timetables Error",error:n.error}),t&&t.reduce(function(t,n,i){var l=n.vendor;return n.timetables.forEach(function(n,c){var o=n.name,s=n.timetable,u=n.error;if(u)t.push(r.a.createElement(D,{title:"".concat(o," (").concat(l||"Unknown vendor",")"),error:u,key:t.length}));else{var m="timetable[".concat(i,"][").concat(c,"]"),f=Boolean(e.visible&&e.visible[m]);t.push(r.a.createElement(N,{name:o,timetable:s,vendor:l,key:m,visible:f,setVisible:function(e){return a({type:"changeTimetableVisibility",key:m,visible:e})}}))}}),t},[]))}(n),r.a.createElement("hr",null),r.a.createElement(b,{gitInfo:p}))};n(46);l.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&window.addEventListener("load",function(){var e="".concat("/ponds-forge-lane-swimming","/service-worker.js");navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})})}},[[17,2,1]]]);
//# sourceMappingURL=main.9778f6ef.chunk.js.map