{"version":3,"sources":["Timetable.js","App.js","index.js","registerServiceWorker.js"],"names":["DAYS","Item","_ref","item","alterations","length","forEach","alteration","i","push","react_default","a","createElement","key","date","style","color","message","description","room","location","dayRows","day","dayName","isNaN","items","dayNameCell","rowSpan","map","startTime","endTime","Timetable_Item","dayRow","Timetable","_ref2","timetable","className","cellSpacing","cellPadding","days","url","URL","window","href","console","log","DEBUG","searchParams","get","localDataSource","GitInfo","gitInfo","Fragment","hash","App","localDataSourceName","this","getLocalDataSourceURL","_this","getDataSourceURL","axios","Date","getTime","then","response","setState","data","vendor","name","src_Timetable","error","errorInfo","statusCode","options","uri","String","_this2","vendorData","vendorIdx","value","timetables","timetableIdx","renderTimetable","renderError","renderTimetables","App_GitInfo","app","renderApp","state","Component","ReactDOM","render","src_App_0","document","getElementById","navigator","addEventListener","swUrl","concat","process","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","catch"],"mappings":"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","file":"static/js/main.e152b1ce.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst DAYS = [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\"];\r\n\r\nconst Item = ({ item }) => {\r\n  const alterations = [];\r\n  if (item.alterations && item.alterations.length > 0) {\r\n    item.alterations.forEach((alteration, i) => {\r\n      alterations.push(<br key={\"br\" + i} />);\r\n      const date = alteration.date || \"No date\";\r\n      alterations.push(<span key={\"alteration-\" + i} style={{ color: \"red\" }}>{date + \", \" + alteration.message}</span>);\r\n    });\r\n  }\r\n  return (\r\n    <div >\r\n      <div>{item.description}</div>\r\n      <div>{item.room}{item.location}</div>\r\n      <div>{alterations}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nfunction dayRow(i, dayNameCell, item) {\r\n  return (\r\n    <tr key={i}>\r\n      {dayNameCell(i)}\r\n      <td>{item.startTime}</td>\r\n      <td>{item.endTime}</td>\r\n      <td><Item item={item} key={i} /></td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nfunction dayRows(day) {\r\n  const dayName = isNaN(day.day) ? day.day : DAYS[day.day];\r\n  const item0 = day.items[0];\r\n  if (!item0) {\r\n    return null;\r\n  }\r\n  const dayNameCell = (i) => (i === 0) ? <td rowSpan={day.items.length}>{dayName}</td> : null;\r\n  return day.items.map((item, i) => dayRow(i, dayNameCell, item));\r\n}\r\n\r\nconst Timetable = ({ timetable }) => (\r\n  <table className=\"tableTimetable\" cellSpacing={0} cellPadding={0}>\r\n    <tbody>\r\n      {timetable.days.map(dayRows)}\r\n    </tbody>\r\n  </table>\r\n);\r\n\r\nexport default Timetable;\r\n","import React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./App.css\";\r\nimport Timetable from \"./Timetable\";\r\nimport gitInfo from \"./static/gitInfo.json\";\r\n\r\nconst url = new URL(window.location.href);\r\nconsole.log(\"Use DEBUG query parameter to use local data (not live data).\");\r\nconst DEBUG = url.searchParams.get(\"DEBUG\") !== \"false\";\r\nconst localDataSource = url.searchParams.get(\"localDataSource\");\r\n\r\n\r\nconst GitInfo = ({ gitInfo }) => (\r\n  <React.Fragment>\r\n    <h2>Version Info</h2>\r\n    <span>Hash: {gitInfo.hash}, Date: {gitInfo.date}</span>\r\n  </React.Fragment>\r\n);\r\n\r\n\r\nclass App extends Component {\r\n  getLocalDataSourceURL(localDataSourceName) {\r\n    switch (localDataSource) {\r\n      case \"ok\": return \"./test/laneSwimming.json\";\r\n      case \"singleDataSourceError\": return \"./test/laneSwimming.s10error.json\";\r\n      case \"error\": return \"./test/laneSwimming.error.json\";\r\n      default: return null;\r\n    }\r\n  }\r\n\r\n  getDataSourceURL(localDataSource) {\r\n    if (DEBUG && localDataSource) {\r\n      const url = this.getLocalDataSourceURL(localDataSource);\r\n      if (url) {\r\n        return url;\r\n      }\r\n    }\r\n    return \"https://c1dz9rg5cd.execute-api.eu-west-2.amazonaws.com/prod/laneSwimmingData\";\r\n  }\r\n\r\n  componentDidMount() {\r\n    const url = this.getDataSourceURL(localDataSource);\r\n    axios.get(url + \"?\" + new Date().getTime())\r\n      .then(response => this.setState({ data: response.data }));\r\n  }\r\n\r\n  renderTimetable(timetable, vendor, key) {\r\n    return (\r\n      <div key={key}>\r\n        <h1>{timetable.name || \"Regular Timetable\"} ({vendor || \"Unknown vendor\"})</h1>\r\n        <Timetable timetable={timetable} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderError(error, vendor, key) {\r\n    const errorInfo = error.statusCode ? [\r\n      error.statusCode,\r\n      error.options && error.options.uri,\r\n    ] : error;\r\n\r\n    return (\r\n      <div key={key}>\r\n        <h1>Error {vendor || \"Unknown vendor\"}</h1>\r\n        <div>{String(errorInfo)}</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTimetables(data) {\r\n    return data.map((vendorData, vendorIdx) => {\r\n      const { error, value, vendor } = vendorData;\r\n      if (!error) {\r\n        const { timetables } = value;\r\n        const renderTimetable = (timetable, timetableIdx) => this.renderTimetable(timetable, vendor, timetableIdx);\r\n        return timetables.map(renderTimetable);\r\n      }\r\n      return this.renderError(error, vendor, vendorIdx);\r\n    });\r\n  }\r\n\r\n  renderApp(data) {\r\n    return (\r\n      <div>\r\n        {data && this.renderTimetables(data)}\r\n        <hr />\r\n        <GitInfo gitInfo={gitInfo} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const app = this.renderApp(this.state && this.state.data);\r\n    return (\r\n      <div className=\"App\">{app}</div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport registerServiceWorker from './registerServiceWorker';\r\nimport './index.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\nregisterServiceWorker();\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n      navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n          registration.onupdatefound = () => {\r\n            const installingWorker = registration.installing;\r\n            installingWorker.onstatechange = () => {\r\n              if (installingWorker.state === 'installed') {\r\n                if (navigator.serviceWorker.controller) {\r\n                  // At this point, the old content will have been purged and\r\n                  // the fresh content will have been added to the cache.\r\n                  // It's the perfect time to display a \"New content is\r\n                  // available; please refresh.\" message in your web app.\r\n                  console.log('New content is available; please refresh.');\r\n                } else {\r\n                  // At this point, everything has been precached.\r\n                  // It's the perfect time to display a\r\n                  // \"Content is cached for offline use.\" message.\r\n                  console.log('Content is cached for offline use.');\r\n                }\r\n              }\r\n            };\r\n          };\r\n        })\r\n        .catch(error => {\r\n          console.error('Error during service worker registration:', error);\r\n        });\r\n    });\r\n  }\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}